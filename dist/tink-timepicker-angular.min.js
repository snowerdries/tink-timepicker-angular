/*! tink-timepicker-angular v1.0.5 */
"use strict";!function(module){try{module=angular.module("tink.timepicker")}catch(e){module=angular.module("tink.timepicker",["tink.safeApply"])}module.directive("tinkTimepicker",["$window","safeApply",function($window,safeApply){return{restrict:"AE",template:'<div class="timepicker"><input type="text" ng-model="ngModel"/><span class="timepicker-later" role="spinbutton"></span><span class="timepicker-earlier" role="spinbutton"></span></div>',require:"ngModel",replace:!0,scope:{ngModel:"="},link:function(scope,elem,attr,ngModel){function isDateSupported(){var i=document.createElement("input");return i.setAttribute("type","date"),"text"!==i.type}var current={hour:{num:0,reset:!0,prev:-1,start:!0},min:{num:0,reset:!0,start:!0}},inputField=elem.find("input");attr.$observe("disabled",function(val){val||""===val||"string"==typeof val&&"disabled"===val.toLowerCase()?inputField.attr("disabled","disabled"):inputField.removeAttr("disabled")});var isNative=/(ip(a|o)d|iphone|android)/gi.test($window.navigator.userAgent);isNative&&isDateSupported()&&inputField.prop("type","time"),elem.find(".timepicker-later").bind("click",function(){return 1===selected?addHour(1):2===selected&&addMinute(1),!1});var bindEvent=function(){inputField.unbind("input").unbind("keydown").unbind("change").unbind("click").unbind("mousedown"),inputField.keydown(function(e){var keycode=e.which;return keycode>47&&58>keycode||keycode>95&&106>keycode?1===selected?handleHour(keycode):handleMinute(keycode):39===keycode&&1===selected?selectMinute(!0):37===keycode&&2===selected?selectHour(!0):38===keycode?1===selected?addHour(1):2===selected&&addMinute(1):40===keycode&&(1===selected?addHour(-1):2===selected&&addMinute(-1)),9!==keycode?!1:void 0})};elem.find(".timepicker-earlier").bind("click",function(){return 1===selected?addHour(-1):2===selected&&addMinute(-1),!1}),isNative&&isDateSupported()?inputField.val("00:00:00"):bindEvent();var keycodeMapper={},mapKeycodes=function(){for(var hulp=0,i=48;57>=i;i++)keycodeMapper[i]=hulp,hulp++;hulp=0;for(var j=96;105>=j;j++)keycodeMapper[j]=hulp,hulp++};mapKeycodes();var handleHour=function(key){var num=keycodeMapper[key];current.hour.reset&&(current.hour.num=0,current.hour.prev=-1,current.hour.reset=!current.hour.reset),current.hour.start=!1,scope.setHour(num)},selectHour=function(reset){isNative&&isDateSupported()||inputField[0].setSelectionRange(0,2),selected=1,current.hour.reset=reset,current.min.reset=!1},selectMinute=function(reset){isNative&&isDateSupported()||inputField[0].setSelectionRange(3,5),selected=2,current.min.reset=reset,current.hour.reset=!1};scope.setHour=function(num){var select=2,firstNumber=parseInt(hourString()[0]),lastNumber=parseInt(hourString()[1]);2>lastNumber?(current.hour.num=10*lastNumber+num,select=-1!==current.hour.prev?2:0!==firstNumber?2:1):2===lastNumber?(4>num?current.hour.num=10*lastNumber+num:current.hour.num=num,select=2):(current.hour.num=num,select=2),current.hour.prev=num,setValue(select)};var hourString=function(){return current.hour.start?"--":("0"+current.hour.num).slice(-2)},minString=function(){return current.min.start?"--":("0"+current.min.num).slice(-2)};scope.setMinute=function(num){var lastNumber=parseInt(minString()[1]);isNaN(lastNumber)||0===lastNumber||lastNumber>5?current.min.num=num:6>lastNumber&&(current.min.num=10*lastNumber+num),setValue(2)};var setValue=function(select){if(isNative&&isDateSupported()){var timeStr=hourString()+":"+minString()+":00";timeStr.replace("-","0"),inputField.val(timeStr)}else inputField.val(hourString()+":"+minString());ngModel.$render(),1===select?selectHour():2===select&&selectMinute(),current.hour.start||current.min.start?ngModel.$setValidity("time",!1):ngModel.$setValidity("time",!0)},handleMinute=function(key){var num=keycodeMapper[key];current.min.start=!1,scope.setMinute(num)},selected=-1,getHourOffset=function(){var padding=parseInt(inputField.css("padding-left"),10);return padding+inputField.val().substr(0,2).width(inputField.css("font"),inputField.css("padding"))+2},getMinOffset=function(){return getHourOffset()+inputField.val().substr(3,2).width(inputField.css("font"),inputField.css("padding"))+2},pollyOffset=function(e){var target=e.target||e.srcElement,style=target.currentStyle||window.getComputedStyle(target,null),borderLeftWidth=parseInt(style.borderLeftWidth,10),rect=target.getBoundingClientRect(),offsetX=e.clientX-borderLeftWidth-rect.left;return offsetX};inputField.bind("mousedown",function(evt){var offset=pollyOffset(evt);return offset<getHourOffset()||offset>getMinOffset()?(selectHour(!0),selected=1):(selectMinute(!0),selected=2),inputField.focus(),!1}),String.prototype.width=function(font,padding){var f=font||"15px arial",p=padding||"",o=$("<div>"+this+"</div>").css({position:"absolute","float":"left","white-space":"nowrap",visibility:"hidden",font:f,padding:p}).appendTo($("body")),w=o.width();return o.remove(),w};var addMinute=function(size){current.min.start=!1;var newMin=current.min.num+size;newMin>0&&60>newMin?current.min.num=newMin:newMin>=60||0>newMin?(addHour(Math.floor(newMin/60)),0>newMin%60?current.min.num=60+newMin%60:current.min.num=newMin%60):current.min.num=0,setValue(2)},addHour=function(size){current.hour.start=!1;var newHour=current.hour.num+size;newHour>0&&24>newHour?current.hour.num=newHour:0>newHour?current.hour.num=24+newHour:current.hour.num=0,setValue(1),current.hour.reset=!0},reset=function(){current={hour:{num:0,reset:!0,prev:-1,start:!0},min:{num:0,reset:!0,start:!0}},ngModel.$setValidity("time",!1),setValue()};scope.$watch("ngModel",function(newVal){var date=null,hour=null,minute=null;date="function"==typeof newVal?newVal():newVal,void 0===date?(current.hour.start=!0,current.min.start=!0,setValue()):angular.isDate(date)&&"Invalid Date"!==date?(hour=date.getHours(),minute=date.getMinutes()):"Invalid Date"!==date&&"string"==typeof date&&date.length>=5&&/^([01]\d|2[0-3]):?([0-5]\d)$/.test(date.substr(0,5))?(hour=parseInt(date.substr(0,2)),minute=parseInt(date.substr(3,2))):reset(),null!==hour&&null!==minute&&angular.isDefined(hour)&&angular.isDefined(minute)&&(current.hour.start=!1,current.hour.num=hour,current.min.start=!1,current.min.num=minute,setValue())}),inputField.on("blur",function(){safeApply(scope,function(){var time=inputField.val(),hour=parseInt(time.substr(0,2)),minute=parseInt(time.substr(3,2));if(null!==hour&&null!==minute&&angular.isDefined(hour)&&angular.isDefined(minute)&&!isNaN(hour)&&!isNaN(minute)){var returnObj;if(returnObj=angular.isDate(scope.ngModel)?new Date(scope.ngModel):new Date,returnObj.setHours(parseInt(hourString())),returnObj.setMinutes(parseInt(minString())),isNative&&isDateSupported()){var timeStr=hourString()+":"+minString()+":00";timeStr.replace("-","0")}ngModel.$setViewValue(returnObj)}})})}}}])}(),angular.module("tink.timepicker").run(["$templateCache",function($templateCache){$templateCache.put("templates/tinkDatePickerRange.html",'<div class=datepickerrange> <div class="pull-left datepickerrange-left"> <div class=datepickerrange-header-left> <div class=pull-left> <button tabindex=-1 type=button class="btn pull-left" ng-click=$selectPane(0)> <i class="fa fa-chevron-left"></i> </button> </div> <div class="text-center clearfix"> <label ng-bind=firstTitle></label> </div> </div> <div class=table-responsive> <table> <thead> <tr class=datepicker-days ng-bind-html=dayLabels> </tr> </thead> <tbody id=firstCal ng-bind-html=firstCal> </tbody> </table> </div> </div> <div class="pull-right datepickerrange-right"> <div class=datepickerrange-header-right> <div class=pull-right> <button tabindex=-1 type=button class="btn pull-left" ng-click=$selectPane(1)> <i class="fa fa-chevron-right"></i> </button> </div> <div class="text-center clearfix"> <label ng-bind=lastTitle></label> </div> </div> <div class=table-responsive> <table> <thead> <tr class=datepicker-days ng-bind-html=dayLabels></tr> </thead> <tbody id=secondCal ng-bind-html=secondCal> </tbody> </table> </div> </div> </div>'),$templateCache.put("templates/tinkDatePickerRangeInputs.html",'<div class="datepicker-input-fields row no-gutter"> <div class=col-sm-6> <input id=firstDateElem tabindex=-1 class=elem-one data-date data-format=00/00/0000 data-placeholder=dd/mm/jjjj tink-format-input ng-model=firstDate valid-name=first>\n<span class=datepicker-icon> <i class="fa fa-calendar"></i> </span> </div> <div class=col-sm-6> <input id=lastDateElem tabindex=-1 class=elem-two data-date data-format=00/00/0000 data-placeholder=dd/mm/jjjj tink-format-input ctrl-model=dynamicName valid-name=last ng-model=lastDate>\n<span class=datepicker-icon> <i class="fa fa-calendar"></i> </span> </div> </div>')}]);
//# sourceMappingURL=tink-timepicker-angular.min.map